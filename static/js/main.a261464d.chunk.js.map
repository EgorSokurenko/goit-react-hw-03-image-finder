{"version":3,"sources":["components/Searchbar/Searchbar.js","api/searchApi.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Modal/Modal.js","components/ImageGallery/ImageGallery.js","App.js","index.js"],"names":["Searchbar","state","search","HandleNameChange","e","setState","target","value","HandleSubmit","preventDefault","trim","toast","error","props","onSubmit","className","this","type","onChange","autoComplete","autoFocus","placeholder","Component","axios","require","default","newApiImg","page","searchQuery","query","get","ImageGalleryItem","onShowModal","onClick","src","webformatURL","alt","largeImageURL","Button","onLoadMore","modalRoot","document","querySelector","Modal","HandleOverley","currentTarget","onCloseModal","window","addEventListener","code","createPortal","class","link","imgApi","ImgApi","ImageGallery","status","values","showModal","urlModal","loadImage","nextSearch","setTimeout","fetchImg","then","res","data","hits","length","console","log","Promise","reject","Error","result","prevState","catch","loadMore","dataset","prevProps","prevSearch","color","map","index","message","scroll","scrollToBottom","activeClass","to","spy","smooth","offset","duration","App","ChangeSubmit","text","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a261464d.chunk.js","sourcesContent":["import { Component } from \"react\";\r\nimport { toast } from 'react-toastify';\r\nexport default class Searchbar extends Component {\r\n    state={\r\n        search: ''\r\n    }\r\n    HandleNameChange= e=>{\r\n        this.setState({search:e.target.value})\r\n    }\r\n    HandleSubmit = e=>{\r\n        e.preventDefault()\r\n        if(this.state.search.trim()===''){\r\n          toast.error('Entry something pls :)', {});\r\n        }\r\n        this.props.onSubmit(this.state.search)\r\n        this.setState({search:''})\r\n    }\r\n  render() {\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form onSubmit={this.HandleSubmit} className=\"Form\">\r\n          <button type=\"submit\" className=\"Button\">\r\n            <span className=\"SearchForm-input\">Search</span>\r\n          </button>\r\n\r\n          <input\r\n            onChange={this.HandleNameChange}\r\n            value={this.state.search}\r\n            className=\"Input\"\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n","const axios = require(\"axios\").default;\r\nexport default class newApiImg {\r\n    constructor() {\r\n      this.page = 1;\r\n      this.searchQuery = '';\r\n    }\r\n    fetchImg(query,page){\r\n             return axios.get(\r\n              `https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=${query}&page=${page}&per_page=12&key=23531683-f7bec5b5f56f02023e7381294`\r\n            )\r\n    }\r\n    resetPage() {\r\n      this.page = 1;\r\n    }\r\n  }\r\n\r\n","export default function ImageGalleryItem({value,onShowModal}) {\r\n        return(\r\n            <li onClick={onShowModal} className=\"ImageGalleryItem\">\r\n              <img className='ImageGalleryItem-image' src={value.webformatURL} alt=\"img\" data-src={value.largeImageURL}/>\r\n            </li>\r\n        )\r\n}","export default function  Button({onLoadMore}) {\r\n    return(\r\n        <button onClick={()=>onLoadMore()} className=\"ButtonLoad\" type='button'>Load More</button>\r\n    )\r\n}","import { Component, createFactory } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\n\r\nconst modalRoot = document.querySelector(\"#modal-root\");\r\n\r\nexport default class Modal extends Component {\r\n  componentDidMount(){\r\n    window.addEventListener('keydown',e=>{\r\n      if(e.code==='Escape'){\r\n        this.props.onCloseModal()\r\n      }\r\n    })\r\n  }\r\n  HandleOverley=(e)=>{\r\n    if(e.target===e.currentTarget){\r\n      this.props.onCloseModal()\r\n    }\r\n  }\r\n  render() {\r\n    return createPortal(\r\n      <div class=\"Overlay\" onClick={this.HandleOverley}>\r\n        <div class=\"Modal\">\r\n          <img src={this.props.link} alt=\"img\" />\r\n        </div>\r\n      </div>,\r\n      modalRoot\r\n    );\r\n  }\r\n}\r\n","import ImgApi from \"../../api/searchApi\";\r\nimport { Component } from \"react\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport ImageGalleryItem from \"../ImageGalleryItem\";\r\nimport Button from \"../Button/\";\r\nimport Modal from \"../Modal/\";\r\nimport { Link, animateScroll as scroll } from \"react-scroll\";\r\n\r\nconst imgApi = new ImgApi();\r\nexport default class ImageGallery extends Component {\r\n  state = {\r\n    status: \"idle\",\r\n    values: \"\",\r\n    error: \"\",\r\n    page: 1,\r\n    showModal:false,\r\n    urlModal:''\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const prevSearch = prevProps.searchQuery;\r\n    const nextSearch = this.props.searchQuery;\r\n    const { page } = this.state;\r\n\r\n    if (prevSearch !== nextSearch) {\r\n      this.setState({ status: \"pending\" });\r\n      this.loadImage(nextSearch, 1);\r\n    }\r\n    if (prevState.page !== this.state.page) {\r\n      this.setState({ status: \"pending\" });\r\n      this.loadImage(nextSearch, page);\r\n    }\r\n  }\r\n  loadImage = (nextSearch, page) => {\r\n    setTimeout(() => {\r\n      imgApi\r\n        .fetchImg(nextSearch, page)\r\n        .then((res) => {\r\n          if (res.data.hits.length) {\r\n            console.log(page);\r\n            return res.data.hits;\r\n          }\r\n          return Promise.reject(new Error(`Nothing find ${nextSearch}`));\r\n        })\r\n        .then((result) =>\r\n          this.setState((prevState) => {\r\n            if (page !== 1) {\r\n              return {\r\n                values: [...prevState.values, ...result],\r\n                status: \"resolved\",\r\n              };\r\n            }\r\n            return {\r\n              values: [...result],\r\n              status: \"resolved\",\r\n            };\r\n          })\r\n        )\r\n        .catch((error) => this.setState({ error, status: \"rejected\" }));\r\n    }, 1000);\r\n  };\r\n  loadMore = () => {\r\n    this.setState((prevState) => ({\r\n      page: prevState.page + 1,\r\n    }));\r\n  };\r\n  showModal = (e) => {\r\n    this.setState((prevState) => ({\r\n      showModal: !prevState.showModal\r\n    }));\r\n    this.setState({urlModal:e.target.dataset.src})\r\n  }\r\n  onCloseModal=()=>{\r\n    this.setState({\r\n      showModal: false});\r\n  }\r\n  render() {\r\n    const { status, values, error, urlModal } = this.state;\r\n    if (status === \"idle\") {\r\n      return <ul className=\"gallery\">ЖДУ</ul>;\r\n    }\r\n    if (status === \"pending\") {\r\n      return (\r\n        <div>\r\n          <Loader className=\"spiner\" type=\"Oval\" color=\"black\" />\r\n          {values && <ul className=\"ImageGallery \">\r\n            {values.map((value, index) => {\r\n              return <ImageGalleryItem key={index} value={value} />;\r\n            })}\r\n          </ul>}\r\n          \r\n        </div>\r\n      );\r\n    }\r\n    if (status === \"rejected\") {\r\n      return <h1>ops... {error.message}</h1>;\r\n    }\r\n    if (status === \"resolved\") {\r\n      return (\r\n        <div>\r\n          <ul className=\"ImageGallery \">\r\n            {values.map((value, index) => {\r\n              \r\n              return <ImageGalleryItem onShowModal={this.showModal} key={index} value={value}  /> ;\r\n            })}\r\n          </ul>\r\n\r\n          {values.length >= 12 && (\r\n            <div className=\"center\">\r\n              <Button  onLoadMore={this.loadMore} message={\"Load more\"} />\r\n            </div>\r\n          )}\r\n          {values.length >= 24 && scroll.scrollToBottom()}\r\n          <Link\r\n            activeClass=\"\"\r\n            to=\"gallery\"\r\n            spy={true}\r\n            smooth={true}\r\n            offset={-70}\r\n            duration={500}\r\n          ></Link>\r\n          {this.state.showModal&&<Modal link={urlModal} onCloseModal={this.onCloseModal}/>}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n","import { ToastContainer } from \"react-toastify\";\nimport 'react-toastify/dist/ReactToastify.css';\nimport { Component } from \"react\";\nimport Searchbar from \"./components/Searchbar\";\nimport ImageGallery from \"./components/ImageGallery/\";\n\n\n\nclass App extends Component {\n  state = {\n    search: \"\",\n    \n  };\n  ChangeSubmit = (text) => {\n    this.setState({ search: text });\n  };\n  render() {\n    return (\n      <div>\n        <Searchbar onSubmit={this.ChangeSubmit} />\n        <ImageGallery searchQuery={this.state.search}/>\n        <ToastContainer/>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}
(this["webpackJsonpgoit-react-hw-3-4-image-finder"]=this["webpackJsonpgoit-react-hw-3-4-image-finder"]||[]).push([[0],{38:function(e,t,n){},40:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),o=n(5),r=n.n(o),s=(n(38),n(4)),i=n(6),u=(n(39),n(40),n(96)),l=n(1);function j(e){var t=e.onSubmit,n=Object(c.useState)(""),a=Object(s.a)(n,2),o=a[0],r=a[1];return Object(l.jsx)("header",{className:"Searchbar",children:Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===o.trim()&&i.b.error("Entry something pls :)",{}),t(o),r("")},className:"SearchForm",children:[Object(l.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(l.jsx)(u.a,{fill:"black"})}),Object(l.jsx)("input",{onChange:function(e){r(e.target.value)},value:o,className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}var b=n(19),d=n(31),m=n(32),f=n(42).default,O=function(){function e(){Object(d.a)(this,e),this.page=1,this.searchQuery=""}return Object(m.a)(e,[{key:"fetchImg",value:function(e,t){return f.get("https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=".concat(e,"&page=").concat(t,"&per_page=12&key=23531683-f7bec5b5f56f02023e7381294"))}},{key:"resetPage",value:function(){this.page=1}}]),e}(),h=n(33),g=n.n(h);n(81);function p(e){var t=e.value,n=e.onShowModal;return Object(l.jsx)("li",{onClick:function(){return n(t.largeImageURL)},className:"ImageGalleryItem",children:Object(l.jsx)("img",{className:"ImageGalleryItem-image",src:t.webformatURL,alt:"img"})})}n(82);function v(e){var t=e.onLoadMore;return Object(l.jsx)("button",{onClick:function(){return t()},className:"ButtonLoad",type:"button",children:"Load More"})}n(83);var x=document.querySelector("#modal-root");function y(e){var t=e.onCloseModal,n=e.link;Object(c.useEffect)((function(){return document.querySelector("body").classList.add("modal-open"),window.addEventListener("keydown",a),function(){document.querySelector("body").classList.remove("modal-open"),window.removeEventListener("keydown",a)}}),[]);var a=function(e){"Escape"===e.code&&t()};return Object(o.createPortal)(Object(l.jsx)("div",{className:"Overlay",onClick:function(e){e.target===e.currentTarget&&t()},children:Object(l.jsx)("div",{className:"Modal",children:Object(l.jsx)("img",{src:n,alt:"img"})})}),x)}var S=n(18),k=(n(92),"idle"),w="pending",N="resolved",L="rejected",M=new O;function I(e){var t=e.searchQuery,n=Object(c.useState)(k),a=Object(s.a)(n,2),o=a[0],r=a[1],i=Object(c.useState)(""),u=Object(s.a)(i,2),j=u[0],d=u[1],m=Object(c.useState)(""),f=Object(s.a)(m,2),O=f[0],h=f[1],x=Object(c.useState)(1),I=Object(s.a)(x,2),C=I[0],E=I[1],q=Object(c.useState)(!1),F=Object(s.a)(q,2),G=F[0],P=F[1],Q=Object(c.useState)(""),R=Object(s.a)(Q,2),B=R[0],J=R[1],T=Object(c.useRef)(null);Object(c.useEffect)((function(){t&&(t!==T.current?(d([]),E(1),r(w),U(t,1)):(J(""),r(w),U(t,C)),T.current=t)}),[t,C]);var U=function(e,t){setTimeout((function(){M.fetchImg(e,t).then((function(n){return n.data.hits.length?(console.log(t),n.data.hits):Promise.reject(new Error("Nothing find to ".concat(e)))})).then((function(e){1!==t?(d((function(t){return[].concat(Object(b.a)(t),Object(b.a)(e))})),r(N)):(d(e),r(N))})).catch((function(e){h(e),r(L)}))}),1e3)},_=function(e){P(!G),J(e)};return o===k?Object(l.jsx)("ul",{}):o===L?Object(l.jsxs)("h2",{className:"message",children:["Ops... ",O.message," :("]}):o===N||o===w?Object(l.jsxs)("div",{children:[Object(l.jsx)("ul",{className:"ImageGallery",children:j.map((function(e,t){return Object(l.jsx)(p,{onShowModal:_,value:e},t)}))}),o===w?Object(l.jsx)(g.a,{className:"spiner",type:"Oval",color:"black"}):j.length>=12&&Object(l.jsx)("div",{className:"center",to:"gallery",children:Object(l.jsx)(v,{onLoadMore:function(){E((function(e){return e+1}))},message:"Load more"})}),""===B&&j.length>=24&&S.animateScroll.scrollMore(400),Object(l.jsx)(S.Link,{activeClass:"",to:"gallery",spy:!0,smooth:!0,offset:-70,duration:500}),G&&Object(l.jsx)(y,{link:B,onCloseModal:function(){P(!1)}})]}):void 0}var C=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(l.jsxs)("div",{children:[Object(l.jsx)(j,{onSubmit:function(e){a(e)}}),Object(l.jsx)(I,{searchQuery:n}),Object(l.jsx)(i.a,{})]})};r.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(C,{})}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.08a2cb20.chunk.js.map
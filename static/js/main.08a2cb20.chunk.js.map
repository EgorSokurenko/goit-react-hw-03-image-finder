{"version":3,"sources":["components/Searchbar/Searchbar.js","api/searchApi.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Modal/Modal.js","components/ImageGallery/ImageGallery.js","App.js","index.js"],"names":["Searchbar","onSubmit","useState","search","setSearch","className","e","preventDefault","trim","toast","error","type","fill","onChange","target","value","autoComplete","autoFocus","placeholder","axios","require","default","newApiImg","this","page","searchQuery","query","get","ImageGalleryItem","onShowModal","onClick","largeImageURL","src","webformatURL","alt","Button","onLoadMore","modalRoot","document","querySelector","Modal","onCloseModal","link","useEffect","classList","add","window","addEventListener","HandelKeyDown","remove","removeEventListener","code","createPortal","currentTarget","Status","imgApi","ImgApi","ImageGallery","status","setStatus","values","setValues","setError","setPage","modal","setShowModal","urlModal","setUrlModal","useRef","current","loadImage","nextSearch","setTimeout","fetchImg","then","res","data","hits","length","console","log","Promise","reject","Error","result","s","catch","showModal","message","map","index","color","to","scroll","scrollMore","activeClass","spy","smooth","offset","duration","App","text","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.08a2cb20.chunk.js","sourcesContent":["import { useState } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport PropTypes from \"prop-types\";\r\nimport \"./Searchbar.css\";\r\nimport { AiOutlineSearch } from \"react-icons/all\";\r\n\r\nexport default function Searchbar ({onSubmit}) {\r\n  const [search, setSearch]=useState('')\r\n  const HandleNameChange = (e) => {\r\n    setSearch(e.target.value)\r\n  };\r\n  const HandleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (search.trim() === \"\") {\r\n      toast.error(\"Entry something pls :)\", {});\r\n    }\r\n    onSubmit(search);\r\n    setSearch('')\r\n  };\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form onSubmit={HandleSubmit} className=\"SearchForm\">\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <AiOutlineSearch fill=\"black\" />\r\n          </button>\r\n\r\n          <input\r\n            onChange={HandleNameChange}\r\n            value={search}\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\nSearchbar.propTypes = {\r\n  onSubmit: PropTypes.func,\r\n};\r\n","const axios = require(\"axios\").default;\r\nexport default class newApiImg {\r\n  constructor() {\r\n    this.page = 1;\r\n    this.searchQuery = \"\";\r\n  }\r\n  fetchImg(query, page) {\r\n    return axios.get(\r\n      `https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=${query}&page=${page}&per_page=12&key=23531683-f7bec5b5f56f02023e7381294`\r\n    );\r\n  }\r\n  resetPage() {\r\n    this.page = 1;\r\n  }\r\n}\r\n","import PropTypes from \"prop-types\";\r\nimport \"./ImgaeGalleryItem.css\";\r\nexport default function ImageGalleryItem({ value, onShowModal }) {\r\n  return (\r\n    <li\r\n      onClick={() => onShowModal(value.largeImageURL)}\r\n      className=\"ImageGalleryItem\"\r\n    >\r\n      <img\r\n        className=\"ImageGalleryItem-image\"\r\n        src={value.webformatURL}\r\n        alt=\"img\"\r\n      />\r\n    </li>\r\n  );\r\n}\r\nImageGalleryItem.propTypes = {\r\n  value: PropTypes.object,\r\n  onShowModal: PropTypes.func,\r\n};\r\n","import PropTypes from \"prop-types\";\r\nimport \"./Button.css\";\r\nexport default function Button({ onLoadMore }) {\r\n  return (\r\n    <button onClick={() => onLoadMore()} className=\"ButtonLoad\" type=\"button\">\r\n      Load More\r\n    </button>\r\n  );\r\n}\r\nButton.propTypes = {\r\n  onLoadMore: PropTypes.func,\r\n};\r\n","import { useEffect, createFactory } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport \"./Modal.css\";\r\nconst modalRoot = document.querySelector(\"#modal-root\");\r\n\r\nexport default function Modal ({onCloseModal,link}) {\r\n  useEffect(()=>{\r\n    document.querySelector('body').classList.add('modal-open')\r\n    window.addEventListener(\"keydown\", HandelKeyDown);\r\n    return ()=>{\r\n      document.querySelector('body').classList.remove('modal-open')\r\n    window.removeEventListener(\"keydown\", HandelKeyDown);\r\n    }\r\n  },[])\r\n  \r\n  const HandelKeyDown = (e) => {\r\n    if (e.code === \"Escape\") {\r\n      onCloseModal();\r\n    }\r\n  };\r\n  const HandleOverley = (e) => {\r\n    if (e.target === e.currentTarget) {\r\n      onCloseModal();\r\n    }\r\n  };\r\n    return createPortal(\r\n      <div className=\"Overlay\" onClick={HandleOverley}>\r\n        <div className=\"Modal\">\r\n          <img src={link} alt=\"img\" />\r\n        </div>\r\n      </div>,\r\n      modalRoot\r\n    );\r\n}\r\nModal.propTypes = {\r\n  onCloseModal: PropTypes.func,\r\n  link: PropTypes.string,\r\n};\r\n","import ImgApi from \"../../api/searchApi\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport ImageGalleryItem from \"../ImageGalleryItem\";\r\nimport Button from \"../Button/\";\r\nimport Modal from \"../Modal/\";\r\nimport { Link, animateScroll as scroll } from \"react-scroll\";\r\nimport PropTypes from \"prop-types\";\r\nimport \"./ImageGallery.css\";\r\nimport { IoEllipseSharp } from \"react-icons/io5\";\r\n\r\nconst Status = {\r\n  IDLE:'idle',\r\n  PENDING:'pending',\r\n  RESOLVED:'resolved',\r\n  REJECTED:'rejected',\r\n}\r\nconst imgApi = new ImgApi();\r\nexport default function ImageGallery ({searchQuery}) {\r\n  const [status, setStatus] = useState(Status.IDLE)\r\n  const [values, setValues] = useState('')\r\n  const [error, setError] = useState('')\r\n  const [page, setPage] = useState(1)\r\n  const [modal, setShowModal] = useState(false)\r\n  const [urlModal, setUrlModal] = useState('')\r\n  const search = useRef(null)\r\n  useEffect(()=>{\r\n    \r\n    if(!searchQuery){\r\n      return\r\n    }\r\n    if(searchQuery!==search.current){\r\n      setValues([])\r\n      setPage(1)\r\n      setStatus(Status.PENDING)\r\n      loadImage(searchQuery,1)\r\n    }else{\r\n      setUrlModal('')\r\n      setStatus(Status.PENDING)\r\n      loadImage(searchQuery, page);\r\n    }\r\n    search.current = searchQuery\r\n    \r\n  },[searchQuery, page])\r\n  const loadImage = (nextSearch, page) => {\r\n    setTimeout(() => {\r\n      imgApi\r\n        .fetchImg(nextSearch, page)\r\n        .then((res) => {\r\n          if (res.data.hits.length) {\r\n            console.log(page);\r\n            return res.data.hits;\r\n          }\r\n          return Promise.reject(new Error(`Nothing find to ${nextSearch}`));\r\n        })\r\n        .then((result) =>{\r\n          if(page!==1){\r\n            setValues(s=>[...s,...result])\r\n            setStatus(Status.RESOLVED)\r\n          }else{\r\n            setValues(result)\r\n            setStatus(Status.RESOLVED)\r\n          }\r\n          \r\n        }\r\n        )\r\n        .catch((error) => {\r\n          setError(error) \r\n          setStatus(Status.REJECTED)});\r\n    }, 1000);\r\n  };\r\n  const loadMore = () => {\r\n    setPage(s=>s+1)\r\n  };\r\n  const showModal = (src) => {\r\n    setShowModal(!modal)\r\n    setUrlModal(src)\r\n  };\r\n  const onCloseModal = () => {\r\n    setShowModal(false)\r\n  };\r\n  \r\n    if (status === Status.IDLE) {\r\n      return <ul></ul>;\r\n    }\r\n    \r\n    if (status === Status.REJECTED) {\r\n      return <h2 className=\"message\">Ops... {error.message} :(</h2>;\r\n    }\r\n    if (status === Status.RESOLVED||status === Status.PENDING) {\r\n      return (\r\n        <div>\r\n          <ul className=\"ImageGallery\"  >\r\n            {values.map((value, index) => {\r\n              return (\r\n                <ImageGalleryItem\r\n                  onShowModal={showModal}\r\n                  key={index}\r\n                  value={value}\r\n                />\r\n              );\r\n              \r\n            })}\r\n            \r\n          </ul>\r\n          {status===Status.PENDING?<Loader className=\"spiner\" type=\"Oval\" color=\"black\" />:values.length >= 12 && (\r\n            <div className=\"center\" to='gallery'>\r\n              <Button onLoadMore={loadMore} message={\"Load more\"} />\r\n            </div>\r\n          )}\r\n          {urlModal===''&& values.length >= 24 && scroll.scrollMore(400)}\r\n          <Link\r\n            activeClass=\"\"\r\n            to=\"gallery\"\r\n            spy={true}\r\n            smooth={true}\r\n            offset={-70}\r\n            duration={500}\r\n          />\r\n          {modal && (\r\n            <Modal link={urlModal} onCloseModal={onCloseModal} />\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n}\r\n\r\nImageGallery.propTypes = {\r\n  searchQuery: PropTypes.string,\r\n};\r\n","import { ToastContainer } from \"react-toastify\";\nimport 'react-toastify/dist/ReactToastify.css';\nimport { useState } from \"react\";\nimport Searchbar from \"./components/Searchbar\";\nimport ImageGallery from \"./components/ImageGallery/\";\n\n\n\nfunction App () {\n  const [search, setSearch] = useState('')\n  const ChangeSubmit = (text) => {\n    setSearch(text)\n  };\n    return (\n      <div>\n        <Searchbar onSubmit={ChangeSubmit} />\n        <ImageGallery searchQuery={search}/>\n        <ToastContainer/>\n      </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}
(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{37:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(6),o=a.n(s),c=(a(37),a(4)),l=a(5),i=a(8),u=a(7),h=a(13),d=(a(38),a(1)),j=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={search:""},e.HandleNameChange=function(t){e.setState({search:t.target.value})},e.HandleSubmit=function(t){t.preventDefault(),""===e.state.search.trim()&&h.b.error("Entry something pls :)",{}),e.props.onSubmit(e.state.search),e.setState({search:""})},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(d.jsx)("header",{className:"Searchbar",children:Object(d.jsxs)("form",{onSubmit:this.HandleSubmit,className:"Form",children:[Object(d.jsx)("button",{type:"submit",className:"Button",children:Object(d.jsx)("span",{className:"SearchForm-input",children:"Search"})}),Object(d.jsx)("input",{onChange:this.HandleNameChange,value:this.state.search,className:"Input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}}]),a}(n.Component),b=a(14),m=a(40).default,p=function(){function e(){Object(c.a)(this,e),this.page=1,this.searchQuery=""}return Object(l.a)(e,[{key:"fetchImg",value:function(e,t){return m.get("https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=".concat(e,"&page=").concat(t,"&per_page=12&key=23531683-f7bec5b5f56f02023e7381294"))}},{key:"resetPage",value:function(){this.page=1}}]),e}(),f=a(32),g=a.n(f);function O(e){var t=e.value,a=e.onShowModal;return Object(d.jsx)("li",{onClick:a,className:"ImageGalleryItem",children:Object(d.jsx)("img",{className:"ImageGalleryItem-image",src:t.webformatURL,alt:"img","data-src":t.largeImageURL})})}function v(e){var t=e.onLoadMore;return Object(d.jsx)("button",{onClick:function(){return t()},className:"ButtonLoad",type:"button",children:"Load More"})}var y=document.querySelector("#modal-root"),x=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).HandleOverley=function(t){t.target===t.currentTarget&&e.props.onCloseModal()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("keydown",(function(t){"Escape"===t.code&&e.props.onCloseModal()}))}},{key:"render",value:function(){return Object(s.createPortal)(Object(d.jsx)("div",{class:"Overlay",onClick:this.HandleOverley,children:Object(d.jsx)("div",{class:"Modal",children:Object(d.jsx)("img",{src:this.props.link,alt:"img"})})}),y)}}]),a}(n.Component),S=a(20),M=new p,w=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={status:"idle",values:"",error:"",page:1,showModal:!1,urlModal:""},e.loadImage=function(t,a){setTimeout((function(){M.fetchImg(t,a).then((function(e){return e.data.hits.length?(console.log(a),e.data.hits):Promise.reject(new Error("Nothing find ".concat(t)))})).then((function(t){return e.setState((function(e){return 1!==a?{values:[].concat(Object(b.a)(e.values),Object(b.a)(t)),status:"resolved"}:{values:Object(b.a)(t),status:"resolved"}}))})).catch((function(t){return e.setState({error:t,status:"rejected"})}))}),1e3)},e.loadMore=function(){e.setState((function(e){return{page:e.page+1}}))},e.showModal=function(t){e.setState((function(e){return{showModal:!e.showModal}})),e.setState({urlModal:t.target.dataset.src})},e.onCloseModal=function(){e.setState({showModal:!1})},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=e.searchQuery,n=this.props.searchQuery,r=this.state.page;a!==n&&(this.setState({status:"pending"}),this.loadImage(n,1)),t.page!==this.state.page&&(this.setState({status:"pending"}),this.loadImage(n,r))}},{key:"render",value:function(){var e=this,t=this.state,a=t.status,n=t.values,r=t.error,s=t.urlModal;return"idle"===a?Object(d.jsx)("ul",{className:"gallery",children:"\u0416\u0414\u0423"}):"pending"===a?Object(d.jsxs)("div",{children:[Object(d.jsx)(g.a,{className:"spiner",type:"Oval",color:"black"}),n&&Object(d.jsx)("ul",{className:"ImageGallery ",children:n.map((function(e,t){return Object(d.jsx)(O,{value:e},t)}))})]}):"rejected"===a?Object(d.jsxs)("h1",{children:["ops... ",r.message]}):"resolved"===a?Object(d.jsxs)("div",{children:[Object(d.jsx)("ul",{className:"ImageGallery ",children:n.map((function(t,a){return Object(d.jsx)(O,{onShowModal:e.showModal,value:t},a)}))}),n.length>=12&&Object(d.jsx)("div",{className:"center",children:Object(d.jsx)(v,{onLoadMore:this.loadMore,message:"Load more"})}),n.length>=24&&S.animateScroll.scrollToBottom(),Object(d.jsx)(S.Link,{activeClass:"",to:"gallery",spy:!0,smooth:!0,offset:-70,duration:500}),this.state.showModal&&Object(d.jsx)(x,{link:s,onCloseModal:this.onCloseModal})]}):void 0}}]),a}(n.Component),k=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={search:""},e.ChangeSubmit=function(t){e.setState({search:t})},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)(j,{onSubmit:this.ChangeSubmit}),Object(d.jsx)(w,{searchQuery:this.state.search}),Object(d.jsx)(h.a,{})]})}}]),a}(n.Component),C=k;o.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(C,{})}),document.getElementById("root"))}},[[87,1,2]]]);
//# sourceMappingURL=main.a261464d.chunk.js.map
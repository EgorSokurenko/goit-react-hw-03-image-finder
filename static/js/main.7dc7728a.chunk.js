(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{37:function(e,t,a){},39:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(6),s=a.n(r),c=(a(37),a(4)),l=a(5),i=a(8),u=a(7),h=a(9),d=(a(38),a(39),a(94)),j=a(1),m=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={search:""},e.HandleNameChange=function(t){e.setState({search:t.target.value})},e.HandleSubmit=function(t){t.preventDefault(),""===e.state.search.trim()&&h.b.error("Entry something pls :)",{}),e.props.onSubmit(e.state.search),e.setState({search:""})},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(j.jsx)("header",{className:"Searchbar",children:Object(j.jsxs)("form",{onSubmit:this.HandleSubmit,className:"SearchForm",children:[Object(j.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(j.jsx)(d.a,{fill:"black"})}),Object(j.jsx)("input",{onChange:this.HandleNameChange,value:this.state.search,className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}}]),a}(n.Component),b=a(14),p=a(41).default,f=function(){function e(){Object(c.a)(this,e),this.page=1,this.searchQuery=""}return Object(l.a)(e,[{key:"fetchImg",value:function(e,t){return p.get("https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=".concat(e,"&page=").concat(t,"&per_page=12&key=23531683-f7bec5b5f56f02023e7381294"))}},{key:"resetPage",value:function(){this.page=1}}]),e}(),g=a(32),v=a.n(g);a(80);function O(e){var t=e.value,a=e.onShowModal;return Object(j.jsx)("li",{onClick:function(){return a(t.largeImageURL)},className:"ImageGalleryItem",children:Object(j.jsx)("img",{className:"ImageGalleryItem-image",src:t.webformatURL,alt:"img"})})}a(81);function y(e){var t=e.onLoadMore;return Object(j.jsx)("button",{onClick:function(){return t()},className:"ButtonLoad",type:"button",children:"Load More"})}a(82);var x=document.querySelector("#modal-root"),S=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).HandelKeyDown=function(t){"Escape"===t.code&&e.props.onCloseModal()},e.HandleOverley=function(t){t.target===t.currentTarget&&e.props.onCloseModal()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){document.querySelector("body").classList.add("modal-open"),window.addEventListener("keydown",this.HandelKeyDown)}},{key:"componentWillUnmount",value:function(){document.querySelector("body").classList.remove("modal-open"),window.removeEventListener("keydown",this.HandelKeyDown)}},{key:"render",value:function(){return Object(r.createPortal)(Object(j.jsx)("div",{class:"Overlay",onClick:this.HandleOverley,children:Object(j.jsx)("div",{class:"Modal",children:Object(j.jsx)("img",{src:this.props.link,alt:"img"})})}),x)}}]),a}(n.Component),w=a(20),M=(a(91),new f),k=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={status:"idle",values:"",error:"",page:1,showModal:!1,urlModal:""},e.loadImage=function(t,a){setTimeout((function(){M.fetchImg(t,a).then((function(e){return e.data.hits.length?(console.log(a),e.data.hits):Promise.reject(new Error("Nothing find to ".concat(t)))})).then((function(t){return e.setState((function(e){return 1!==a?{values:[].concat(Object(b.a)(e.values),Object(b.a)(t)),status:"resolved"}:{values:Object(b.a)(t),status:"resolved"}}))})).catch((function(t){return e.setState({error:t,status:"rejected"})}))}),1e3)},e.loadMore=function(){e.setState((function(e){return{page:e.page+1}}))},e.showModal=function(t){e.setState((function(e){return{showModal:!e.showModal}})),e.setState({urlModal:t})},e.onCloseModal=function(){e.setState({showModal:!1})},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=e.searchQuery,n=this.props.searchQuery,o=this.state.page;a!==n&&(this.setState({status:"pending",page:1}),this.loadImage(n,1)),t.page!==this.state.page&&(this.setState({status:"pending"}),this.loadImage(n,o))}},{key:"render",value:function(){var e=this,t=this.state,a=t.status,n=t.values,o=t.error,r=t.urlModal;return"idle"===a?Object(j.jsx)("ul",{className:"gallery"}):"pending"===a?Object(j.jsxs)("div",{children:[n&&Object(j.jsx)("ul",{className:"ImageGallery ",children:n.map((function(e,t){return Object(j.jsx)(O,{value:e},t)}))}),Object(j.jsx)(v.a,{className:"spiner",type:"Oval",color:"black"})]}):"rejected"===a?Object(j.jsxs)("h2",{className:"message",children:["Ops... ",o.message," :("]}):"resolved"===a?Object(j.jsxs)("div",{children:[Object(j.jsx)("ul",{className:"ImageGallery ",children:n.map((function(t,a){return Object(j.jsx)(O,{onShowModal:e.showModal,value:t},a)}))}),n.length>=12&&Object(j.jsx)("div",{className:"center",children:Object(j.jsx)(y,{onLoadMore:this.loadMore,message:"Load more"})}),n.length>=24&&w.animateScroll.scrollToBottom(),Object(j.jsx)(w.Link,{activeClass:"",to:"gallery",spy:!0,smooth:!0,offset:-70,duration:500}),this.state.showModal&&Object(j.jsx)(S,{link:r,onCloseModal:this.onCloseModal})]}):void 0}}]),a}(n.Component),C=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={search:""},e.ChangeSubmit=function(t){e.setState({search:t})},e}return Object(l.a)(a,[{key:"render",value:function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)(m,{onSubmit:this.ChangeSubmit}),Object(j.jsx)(k,{searchQuery:this.state.search}),Object(j.jsx)(h.a,{})]})}}]),a}(n.Component),N=C;s.a.render(Object(j.jsx)(o.a.StrictMode,{children:Object(j.jsx)(N,{})}),document.getElementById("root"))}},[[92,1,2]]]);
//# sourceMappingURL=main.7dc7728a.chunk.js.map